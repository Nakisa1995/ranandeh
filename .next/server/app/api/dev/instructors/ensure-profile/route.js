"use strict";(()=>{var e={};e.id=622,e.ids=[622],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},52775:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f});var i={};t.r(i),t.d(i,{POST:()=>d});var n=t(49303),a=t(88716),s=t(60670),o=t(87070),u=t(83493),p=t(31535);async function d(e){let r=await e.json(),t=String(r?.userId||""),i=r?.displayName;if(!t)return o.NextResponse.json({ok:!1,error:"userId is required"},{status:400});let n=await u._.instructorProfile.findUnique({where:{userId:t}});if(n||(n=await u._.instructorProfile.create({data:{user:{connect:{id:t}},city:"",...i?{displayName:i}:{}}})),!n.slug||""===n.slug){let e=await u._.user.findUnique({where:{id:t}}),r=i||e?.name||`instructor-${n.id.slice(-6)}`,a=await (0,p.I)(r,async e=>!!await u._.instructorProfile.findUnique({where:{slug:e}}));await u._.instructorProfile.update({where:{id:n.id},data:{slug:a}}),n={...n,slug:a}}return o.NextResponse.json({ok:!0,profile:n})}let l=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/dev/instructors/ensure-profile/route",pathname:"/api/dev/instructors/ensure-profile",filename:"route",bundlePath:"app/api/dev/instructors/ensure-profile/route"},resolvedPagePath:"C:\\Users\\Dirmina\\Desktop\\ranandeh-ready\\app\\api\\dev\\instructors\\ensure-profile\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:f,serverHooks:m}=l,g="/api/dev/instructors/ensure-profile/route";function w(){return(0,s.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},83493:(e,r,t)=>{t.d(r,{_:()=>n});let i=require("@prisma/client"),n=global.prisma??new i.PrismaClient({log:["error"]})},31535:(e,r,t)=>{function i(e){return e.toLowerCase().trim().replace(/[\u0600-\u06FF]/g,e=>e).replace(/[^a-z0-9\u0600-\u06FF]+/g,"-").replace(/^-+|-+$/g,"")}async function n(e,r){let t=i(e)||"instructor",n=1;for(;await r(t);)n+=1,t=`${i(e)}-${n}`;return t}t.d(r,{I:()=>n})}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[948,972],()=>t(52775));module.exports=i})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{2294:function(e,a,t){Promise.resolve().then(t.bind(t,3066))},9512:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return s}});var i=t(7437);function s(e){let{className:a="",children:t,as:s="div"}=e;return(0,i.jsxs)(s,{className:["group relative overflow-hidden rounded-2xl","border border-white/10 bg-white/5 dark:bg-black/30","backdrop-blur-md shadow-[0_10px_30px_rgba(0,0,0,.25)]","transition-all duration-300",a].join(" "),children:[(0,i.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute -inset-px rounded-2xl opacity-30 blur-xl transition-opacity duration-300 group-hover:opacity-60",style:{background:"conic-gradient(from 180deg at 50% 50%, #1f92ff, #a855f7, #22d3ee, #1f92ff)"}}),(0,i.jsx)("div",{className:"relative z-10",children:t})]})}t(2265)},3066:function(e,a,t){"use strict";t.d(a,{default:function(){return r}});var i=t(7437),s=t(2265),l=t(9512);function r(e){var a,t,r,n;let{locale:o,initial:c}=e,[d,u]=(0,s.useState)(c.name),[h]=(0,s.useState)(c.email),[m,p]=(0,s.useState)(c.city),[x,f]=(0,s.useState)(c.postcode),[g,b]=(0,s.useState)(c.address),[v,j]=(0,s.useState)(c.phone),[N,w]=(0,s.useState)(c.bio),[y,k]=(0,s.useState)(null),[S,C]=(0,s.useState)(!1),_=(0,s.useRef)(null);(0,s.useEffect)(()=>{},[]);let[E,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{D("1"===localStorage.getItem("pref_notify"))},[]);let P=(e,a)=>"fa"===o?e:a,O="w-full rounded-xl border border-white/10 bg-white/5 dark:bg-black/20 px-4 h-11 outline-none placeholder:text-foreground/40";async function U(e){if(e.preventDefault(),!(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,city:m,postcode:x,address:g,phone:v,bio:N})})).ok){alert("fa"===o?"خطا در ذخیره":"Save failed");return}alert("fa"===o?"ذخیره شد":"Saved")}async function I(e){C(!0);try{let a=new FormData;a.append("file",e);let t=await fetch("/api/profile/avatar",{method:"POST",body:a}),i=await t.json();if(!t.ok||!(null==i?void 0:i.ok))throw Error((null==i?void 0:i.error)||"upload failed");k("".concat(i.url,"?t=").concat(Date.now()))}catch(e){alert(e.message||("fa"===o?"آپلود ناموفق":"Upload failed"))}finally{C(!1)}}async function T(){if(E){localStorage.setItem("pref_notify","0"),D(!1);return}if(!("Notification"in window)){alert("fa"===o?"مرورگر شما نوتیفیکیشن را پشتیبانی نمی‌کند.":"Notifications not supported.");return}"granted"===await Notification.requestPermission()&&(localStorage.setItem("pref_notify","1"),D(!0),new Notification("\uD83D\uDC4D",{body:"fa"===o?"اعلان فعال شد.":"Notifications enabled."}))}return(0,i.jsx)("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:(0,i.jsx)(l.default,{className:"w-full p-5 sm:p-7 lg:p-9",children:(0,i.jsxs)("form",{dir:"fa"===o?"rtl":"ltr",onSubmit:U,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"relative",children:[y?(0,i.jsx)("img",{src:y,alt:"avatar",className:"h-16 w-16 rounded-full ring-1 ring-white/10 object-cover"}):(0,i.jsx)("div",{className:"h-16 w-16 rounded-full ring-1 ring-white/10 bg-white/10 flex items-center justify-center text-lg font-semibold",children:(null==d?void 0:null===(t=d.trim())||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.toUpperCase())||(null===(r=h[0])||void 0===r?void 0:r.toUpperCase())}),(0,i.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},className:"absolute -bottom-1 -right-1 text-xs px-2 py-1 rounded-lg bg-white/20 hover:bg-white/30 backdrop-blur ring-1 ring-white/20",children:S?"fa"===o?"درحال…":"…":P("ادیت","Edit")}),(0,i.jsx)("input",{ref:_,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:function(e){var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&I(t)}})]}),(0,i.jsxs)("div",{className:"text-sm opacity-80",children:[(0,i.jsx)("div",{className:"font-semibold",children:P("پروفایل شما","Your profile")}),(0,i.jsx)("div",{className:"opacity-70",children:h})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-5",children:[(0,i.jsxs)("div",{className:"lg:col-span-3 space-y-4",children:[(0,i.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:P("نام","Name")}),(0,i.jsx)("input",{className:O,value:d,onChange:e=>u(e.target.value)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:"Email"}),(0,i.jsx)("input",{className:"".concat(O," opacity-60"),value:h,disabled:!0})]})]}),(0,i.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:P("شهر","City")}),(0,i.jsx)("input",{className:O,value:m,onChange:e=>p(e.target.value)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:P("کُد پستی","Postcode")}),(0,i.jsx)("input",{className:O,value:x,onChange:e=>f(e.target.value)})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:P("آدرس","Address")}),(0,i.jsx)("input",{className:O,value:g,onChange:e=>b(e.target.value)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:P("تلفن","Phone")}),(0,i.jsx)("input",{className:O,value:v,onChange:e=>j(e.target.value)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block mb-2 text-sm opacity-80",children:P("بیوگرافی","Bio")}),(0,i.jsx)("textarea",{className:"w-full rounded-xl border border-white/10 bg-white/5 dark:bg-black/20 p-4 outline-none placeholder:text-foreground/40 min-h-[120px]",value:N,onChange:e=>w(e.target.value)})]}),(0,i.jsx)("button",{type:"submit",className:"relative w-full md:w-auto h-11 rounded-xl text-white font-medium ring-1 ring-white/10 overflow-hidden backdrop-blur-md shadow-[0_0_18px_rgba(56,189,248,.35)] transition hover:brightness-110 active:brightness-95 px-5",children:"fa"===o?"ذخیره":"Save"})]}),(0,i.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 dark:bg-black/20 p-4",children:[(0,i.jsx)("div",{className:"text-sm opacity-80 mb-2",children:P("ترجیحات","Preferences")}),(0,i.jsx)("div",{className:"text-xs opacity-70",children:P("تم و زبان از هدر قابل تغییر است.","Switch language & theme from the header.")}),(0,i.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm items-center",children:[(0,i.jsx)("div",{className:"opacity-70",children:P("وضعیت مربی","Instructor status")}),(0,i.jsx)("div",{className:"text-right",children:c.verified?P("تأیید شده","Verified"):P("تأیید نشده","Not verified")}),(0,i.jsx)("div",{className:"opacity-70",children:P("امتیاز","Rating")}),(0,i.jsx)("div",{className:"text-right",children:null!==(n=c.rating)&&void 0!==n?n:"—"}),(0,i.jsx)("div",{className:"opacity-70",children:P("نوتیفیکیشن مرورگر","Browser notifications")}),(0,i.jsx)("div",{className:"text-right",children:(0,i.jsx)("button",{type:"button",onClick:T,className:"px-3 py-1 rounded-lg ring-1 ring-white/10 ".concat(E?"bg-emerald-500/30":"bg-white/10"),children:E?P("فعال","On"):P("غیرفعال","Off")})})]})]}),(0,i.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 dark:bg-black/20 p-4 text-sm opacity-80",children:P("آواتار را از دکمه‌ی ادیت کنار عکس تغییر بده.","Use the Edit button on avatar to upload a photo.")})]})]})]})})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2294)}),_N_E=e.O()}]);